# Russian
## Домашняя работа 3
## Задание 1
Для начала нужно было поработать с http сервером на чистом node js. Там мы реализовывали возможноть добавления и просмотра позиций. Каждая новая позиция сохраняется в новом файле в специальной директории. В самом начале мы проверяем, есть ли у нас сертификат и приватный ключ для установки защищённого соединения. Если сертифика и ключ есть, то у нас создаётся https сервер, если же нету, то http. Потом у нас наш запрос попадает в обработчик. Там мы из запроса достаём метод и url. Url мы парсим, получая оттуда конкретный путь, по которому мы делаем запрос. Потом с помощью listener мы достаём данные из тела запроса и приводим их к json формату. Потом с помощью полученного из запроса метода и пути мы проверяем, можем ли мы обработать этот запрос. Если можем, то мы вызываем функцию router, в которую мы передаём наше тело запроса и объект ответа. Если мы не можем обработать запрос, то выводим соответствующее сообщение. В routers мы уже переходим к обработке наших данные и отправке ответа. В нашем случаем мы обрабатываем два запроса, на добавление и вывод всех данных. Если мы добавляем, то мы вызываем функцию addNewPosition, в которую передаём наше тело запроса. При добавлении, мы вначале проверяем, чтобы в нашем теле находились необходимые нам поля. Если необходимых полей не хватает, выводим ошибку, если же хватает, то идём дальше. Дальше мы проверяем, есть ли у нас директория, куда мы будем сохранять наши файлы, если нету, то создаём её. Потом с помощью метода .writefile мы создаём наш файл, который будет называться как конкатенация названия компании и текущего времени. В файл мы записываем наш json объект, приводя его к строке и возвращает id записанного объекта.
Если же мы хотим получить список объектов, то мы вызываем функцию getAllPositions, в которой происходит считавание всех файлов из директории и конвертации в json формат. В конечном итоге, мы получаем массив данных в json формате.

## Задание 2
Во втором задании, нам нужно было уже разработать приложение используя express и добавить туда ещё обработку некоторого количества запросов. Нам нужно было обработать запросы к каждой сущности: позиция и кандидат. Нужно было, чтобы была возможность добавлять, получать, получать по id, изменять и удалять позиции. Для получения тела нашего запроса в формате json, мы используем boyd-parser. Запросы все очень похожи друг на друга. В запросах на добавление, мы берём данные из тела нашего запроса, проверяем из на необходимые поля и создаём файл с уникальным идентификатором. В запросах на получение, мы получаем массив объектов из файлов в директории или один объект по id. В запросах на удаление мы находим файл по id и удаляем его. В запросах на изменение, мы находим файл по id, получаем оттуда объект и изменяем его, после чего сохраняя обратно в файл. Так же нужно было ещё сделать отправку письма на email при выполнении определённых условий. Отправка на email была реализована с помощью модуля nodemailer. Чтобы отправил письмо с помощью этого модуля, нужно указать данные от почты, с которой будет идти отправка, указать почты, на которые будет отправлено письмо, тему письма и его содержимое. 

# English
## HomeWork 3
## Task 1
First, I had to work with an http server on a pure node js. There we implemented the possibility of adding and viewing positions. Each new position is saved in a new file in a special directory. At the very beginning, we check if we have a certificate and a private key to establish a secure connection. If there is a certificate and a key, then we create an https server, if not, then http. Then our request goes to the handler. There we get the method and url from the request. Url we parse, getting from there the specific path along which we make the request. Then, using the listener, we get the data from the request body and convert it to json format. Then, using the method and path received from the request, we check if we can process this request. If we can, then we call the router function, into which we pass our request body and response object. If we cannot process the request, then we display an appropriate message. In routers, we are already moving on to processing our data and sending a response. In our case, we are processing two requests to add and display all data. If we add, then we call the addNewPosition function, into which we pass our request body. When adding, we first check that the fields we need are in our body. If the required fields are not enough, we display an error, if there are enough, then we go further. Next, we check if we have a directory where we will save our files, if not, then we create it. Then, using the .writefile method, we create our file, which will be named as the concatenation of the company name and the current time. We write our json object to the file, cast it to a string and return the id of the recorded object.
If we want to get a list of objects, then we call the getAllPositions function, which reads all files from the directory and converts them to json format. Ultimately, we get an array of data in json format.

## Task 2
In the second task, we already needed to develop an application using express and add processing of a certain number of requests there. We needed to process requests for each entity: position and candidate. It was necessary to be able to add, get, get by id, change and delete positions. To get the body of our request in json format, we use boyd-parser. The queries are all very similar to each other. In add requests, we take data from the body of our request, check it for the required fields and create a file with a unique identifier. In requests for receiving, we receive an array of objects from files in a directory or one object by id. In delete requests, we find the file by id and delete it. In change requests, we find the file by id, get the object from there and modify it, and then save it back to the file. It was also necessary to send a letter by email if certain conditions were met. Email sending was implemented using the nodemailer module. To send a letter using this module, you need to specify the data from the mail from which the sending will go, indicate the mails to which the letter will be sent, the subject of the letter and its content.